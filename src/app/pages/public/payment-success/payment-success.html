<div class="payment-result-container">
  <div class="payment-result-content">
    <!-- Processing State -->
    @if (isProcessing()) {
      <div class="processing-state">
        <div class="spinner-container">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Processing...</span>
          </div>
        </div>
        <h2>Processing your payment...</h2>
        <p>Please wait while we confirm your transaction and set up your account.</p>
      </div>
    }

    <!-- Success State -->
    @if (!isProcessing() && isSuccess() && paymentDetails()) {
      <div class="success-state">
        <div class="success-icon">
          <i class="bi bi-check-circle-fill"></i>
        </div>
        <h1 class="success-title">Payment Successful!</h1>
        <p class="success-message">Your payment has been processed successfully and your account is ready.</p>

        <div class="payment-details">
          <div class="detail-item">
            <span class="detail-label">Transaction ID</span>
            <span class="detail-value">{{ paymentDetails()?.transaction_id }}</span>
          </div>
          @if (paymentDetails()?.amount) {
            <div class="detail-item">
              <span class="detail-label">Amount</span>
              <span class="detail-value">{{ paymentDetails()?.amount }} {{ paymentDetails()?.currency?.toUpperCase() }}</span>
            </div>
          }
        </div>

        <div class="alert alert-info">
          <i class="bi bi-clock me-2"></i>
          <strong>Redirecting in {{ countdown() }} seconds...</strong>
          <p class="mb-0 mt-2">You will be automatically redirected to your CandyHire dashboard.</p>
        </div>
      </div>
    }

    <!-- Error State -->
    @if (!isProcessing() && errorMessage()) {
      <div class="error-state">
        <div class="error-icon">
          <i class="bi bi-exclamation-triangle-fill"></i>
        </div>
        <h1 class="error-title">Payment Processing Failed</h1>
        <p class="error-message">{{ errorMessage() }}</p>

        <div class="alert alert-warning">
          <i class="bi bi-info-circle-fill me-2"></i>
          <strong>Need help?</strong> Please contact our support team with your payment details.
        </div>

        <div class="action-buttons">
          <button class="btn btn-secondary" routerLink="/register">
            <i class="bi bi-arrow-left me-2"></i>
            Back to Registration
          </button>
          <a href="mailto:support@candyhire.cloud" class="btn btn-primary">
            <i class="bi bi-envelope me-2"></i>
            Contact Support
          </a>
        </div>
      </div>
    }

    <!-- Footer -->
    <div class="payment-result-footer">
      <p>&copy; 2024 CandyHire. All rights reserved.</p>
    </div>
  </div>
</div>
