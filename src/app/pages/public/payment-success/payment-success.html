<div class="payment-result-container">
  <div class="payment-result-content">
    <!-- Processing State -->
    @if (isProcessing()) {
      <div class="processing-state">
        <div class="spinner-container">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Processing...</span>
          </div>
        </div>
        <h2>Processing your payment...</h2>
        <p>Please wait while we confirm your transaction with PayPal.</p>
      </div>
    }

    <!-- Success State -->
    @if (!isProcessing() && isSuccess()) {
      <div class="success-state">
        <div class="success-icon">
          <i class="bi bi-check-circle-fill"></i>
        </div>
        <h1 class="success-title">Payment Successful!</h1>
        <p class="success-message">{{ paymentDetails()?.message }}</p>

        <div class="payment-details-card">
          <h3>Payment Details</h3>
          <div class="detail-row">
            <span class="detail-label">Transaction ID:</span>
            <span class="detail-value">{{ paymentDetails()?.transaction_id }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Amount:</span>
            <span class="detail-value">
              {{ paymentDetails()?.amount }} {{ paymentDetails()?.currency }}
            </span>
          </div>
          @if (paymentDetails()?.tenant_assigned) {
            <div class="detail-row">
              <span class="detail-label">Status:</span>
              <span class="detail-value badge-success">Tenant Assigned</span>
            </div>
          }
        </div>

        <div class="next-steps">
          <h3>What's Next?</h3>
          <ul>
            <li><i class="bi bi-check-circle"></i> Your account is now active</li>
            <li><i class="bi bi-check-circle"></i> A dedicated tenant has been assigned</li>
            <li><i class="bi bi-check-circle"></i> You can now log in to your dashboard</li>
            <li><i class="bi bi-check-circle"></i> Check your email for important information</li>
          </ul>
        </div>

        <div class="action-buttons">
          <button class="btn btn-primary btn-lg" (click)="goToLogin()">
            <i class="bi bi-box-arrow-in-right me-2"></i>
            Go to Login
          </button>
        </div>

        <p class="redirect-notice">
          You will be redirected to login page in 5 seconds...
        </p>
      </div>
    }

    <!-- Error State -->
    @if (!isProcessing() && !isSuccess() && errorMessage()) {
      <div class="error-state">
        <div class="error-icon">
          <i class="bi bi-exclamation-triangle-fill"></i>
        </div>
        <h1 class="error-title">Payment Processing Failed</h1>
        <p class="error-message">{{ errorMessage() }}</p>

        <div class="alert alert-warning">
          <i class="bi bi-info-circle-fill me-2"></i>
          <strong>Need help?</strong> Please contact our support team with your payment details.
        </div>

        <div class="action-buttons">
          <button class="btn btn-secondary" routerLink="/register">
            <i class="bi bi-arrow-left me-2"></i>
            Back to Registration
          </button>
          <a href="mailto:support@candyhire.cloud" class="btn btn-primary">
            <i class="bi bi-envelope me-2"></i>
            Contact Support
          </a>
        </div>
      </div>
    }

    <!-- Footer -->
    <div class="payment-result-footer">
      <p>&copy; 2024 CandyHire. All rights reserved.</p>
    </div>
  </div>
</div>
